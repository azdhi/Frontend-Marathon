<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css"
        integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog=="
        crossorigin="anonymous" />
    <title>DKH</title>
    <link rel="stylesheet" href="./style/style.css">
    <script src="./"></script>
</head>

<body>
    <aside></aside>
    <main>
        <form id="dkh-signup-form">
            <div class="dkh-form-header">
                <div>
                    <small>Sign up with</small>
                    <div class="dkh-form-header__social-wrapper">
                        <button type="button" class="dkh-btn dkh-btn-icon dkh-btn-github">
                            <i class="fab fa-github fa-lg"></i>
                            Github
                        </button>
                        <button type="button" class="dkh-btn dkh-btn-icon dkh-btn-twitter">
                            <i class="fab fa-twitter fa-lg"></i>
                            Twitter
                        </button>
                    </div>
                </div>
            </div>
            <div class="dkh-form-body">
                <small>Or sign in with email and password</small>
                <div class="dkh-form-field">
                    <fieldset class="email">
                        <input autofocus class="dkh-form-field__input" type="text" name="email" id="email"
                            placeholder="youremail@email.com">
                        <div class="dkh-form-field__messages"></div>
                    </fieldset>
                </div>
                <div class="dkh-form-field">
                    <fieldset class="password">
                        <input class="dkh-form-field__input" name="password" type="password" id="password"
                            placeholder="yourpassword">
                        <div class="dkh-form-field__messages"></div>
                    </fieldset>
                </div>
            </div>
            <div class="dkh-form-footer">
                <button class="dkh-btn dkh-btn-primary" type="submit">Sign Up</button>
            </div>
        </form>
    </main>

    <script>
        // store signup form element reference and add submit event listener
        const signupForm = document.getElementById('dkh-signup-form');
        signupForm.addEventListener('submit', handleSignupFormSubmit);

        /**
         * callback function for signup form submit event listener
         */
        function handleSignupFormSubmit(e) {
            // prevent default browser behaviour
            e.preventDefault();

            const formDataEntries = new FormData(signupForm).entries();
            const {
                email,
                password
            } = Object.fromEntries(formDataEntries);

            const emailErrorMessage = validateEmail(email);
            const passowrdErrorMessage = validatePassword(password);

            if (emailErrorMessage) {
                // select the email form field message element
                const emailErrorMessageElement = document.querySelector('.email .dkh-form-field__messages');
                // show email error message to user
                emailErrorMessageElement.innerText = emailErrorMessage;
            }

            if (passowrdErrorMessage) {
                // select the email form field message element
                const passwordErrorMessageElement = document.querySelector('.password .dkh-form-field__messages');
                // show password error message to user
                passwordErrorMessageElement.innerText = passowrdErrorMessage;
            }
        }

        /**
         * validate email
         */
        function validateEmail(email) {
            if (!email) return 'Email is required';

            const isValidEmail = /^\S+@\S+$/g
            if (!isValidEmail.test(email)) {
                return 'Please enter a valid email';
            }

            return '';
        }

        /**
         * validate passowrd
         */
        function validatePassword(password, minlength) {
            if (!password) return 'Password is required';

            if (password.length < minlength) {
                return `Please enter a password that's at least ${minlength} characters long`;
            }

            const hasCapitalLetter = /[A-Z]/g;
            if (!hasCapitalLetter.test(password)) {
                return 'Please use at least one capital letter.';
            }

            const hasNumber = /\d/g;
            if (!hasNumber.test(password)) {
                return 'Please use at least one number.';
            }

            return '';
        }
    </script>
</body>

</html>